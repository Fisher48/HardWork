Задание 2: Фазз-тестирование

Для выполнения задания я выбрал Jazzer, что логично учитывая язык на котором я программирую.
Вначале я изучил документацию по Jazzer, но как оказалось практических примеров было очень мало, поэтому пришлось покопаться поглубже в интернете.
Статья с хабра для меня оказались сложными в понимании, но основную суть фаззера и фазз-тестирования я уловил.
Фаззер генерирует пограничные случаи для тестов, null, пустые объекты громадные числа, выход за диапазон, иероглифы в строках,
невалидные данные, в общем все, чтобы попытаться сломать систему.

Для написания тестов я брал дипломный проект написанный на Java, строк порядка 15 тысяч (учитывая все файлы).
В начале, я попробовал организовать тесты на валидацию данных в ДТО, как работают
конвертеры сущностей, обычные обращения к эндпоинтам (получение машины, предприятия, поездок).
Где уже внутри задаются данные для запроса.
Первая ошибка которую я получил это SSRF (Server-Side Request Forgery).
Так как Jazzer по умолчанию блокирует сетевые вызовы, возникла данная ошибка, а я поднимал весь контекст приложения, 
мне нужно было заглушить лишние сервисы как Телеграм и Кафку.
При запуске тестов я заметил, что если их не ограничивать по времени выполнения, то они делаются до 5 мин каждый.
Я сначала был поражен нагрузкой на систему, когда услышал звук кулера на ноутбуке.)
В итоге это привело к ошибке по памяти 
`Exception: java.lang.OutOfMemoryError thrown from the UncaughtExceptionHandler in thread "surefire-forkedjvm-command-thread"`
Далее я уже ограничил время выполнение теста до 30 секунд. `@FuzzTest(maxDuration = "30s")`
Тесты завершились без ошибок, что странно, далее я начал уже смотреть, 
возможно я их составил некорректно и мокать сервисы не нужно, а нужно работать с реальными данными в сервисах.
Но я вижу как много операций выполняет каждый тест, просто огромное кол-во, по логам видно 35+ млн операций в одном тесте (если брать 5 мин выполнения теста).
Заметил ошибку NPE в сервисе ReportService, который генерирует отчеты, при пустых датах код падает, 
добавил обработку граничных случаев с пустыми датами.
Конечно когда я делал сквозные E2E тесты, то я старался учесть все возможные ситуации, но именно абсурдные никогда не возможно учесть.


В любом случае это хороший опыт и знание, который будет полезным.
Кажется, что данные тесты используются в основном инженерами по тестированию и не каждый разработчик использует их в повседневной работе.
Они очень специфичны и нужны в очень серьезных проектах. Как был пример из статьи с ошибкой при посадке космического модуля "Скиапарелли" на Марсе.  
Конечно прорабатывать граничные случаи всегда нужно, ведь тесты на то и тесты, что должны выявлять ошибки в работе программы, 
а не для того, чтобы просто покрыть весь код и говорить что у нас есть тесты ради тестов.
И как раз fuzz-тесты в данном случае очень хорошо помогают выявить обработку плохих JSON, некорректный маппинг, пустые коллекции, валидацию и т.д
